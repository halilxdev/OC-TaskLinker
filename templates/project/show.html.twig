{% extends 'base.html.twig' %}

{% block title %}Projet{% endblock %}

{% block headerText %}
<div class="flex-header">
    <h1>{{ project.name }}</h1>
    <div class="user-list">
        {% for employee in employees %}
            <div class="avatar">{{ employee.firstName|first|upper }} {{ employee.lastName|first|upper }}</div>
        {% endfor %}
    </div>
    <a class="button" href="{{ path('app_project_edit', { 'id': project.id }) }}">Modifier</a>
</div>
{% endblock %}

{% block body %}

<div id="tasks-container">
    
    <div class="task-column">
        <h2>To Do</h2>
        <div class="tasks-list">
            {% for task in tasks %}
                {% if task.status.value == 'todo' %}
                    <a class="task" href="{{ path('app_task_edit', {'id': task.id}) }}">
                        <h3>{{task.title}}</h3>
                        <p>{{task.description}}</p>
                        <div class="task-infos">
                            <div class="task-deadline">
                                {% if not task.deadline is null %}
                                    <i class="fa-regular fa-calendar"></i> {{task.deadline|date('d-m-Y')}}
                                {% endif %}
                            </div>
                            <div class="mini-user">
                                {{ task.employee.firstName|first|upper }} {{ task.employee.lastName|first|upper }}
                            </div>
                        </div>
                    </a>
                {% endif %}
            {% endfor %}
            <a href="{{ path('app_task_new') }}" class="task-add">
                + Ajouter une tâche
            </a>
        </div>
    </div>

    <div class="task-column">
        <h2>Doing</h2>
        <div class="tasks-list">
            {% for task in tasks %}
                {% if task.status.value == 'doing' %}
                    <a class="task" href="../task/{{task.id}}">
                        <h3>{{task.title}}</h3>
                        <p>{{task.description}}</p>
                        <div class="task-infos">
                            <div class="task-deadline">
                                {% if not task.deadline is null %}
                                    <i class="fa-regular fa-calendar"></i> {{task.deadline|date('d-m-Y')}}
                                {% endif %}
                            </div>
                            <div class="mini-user">
                                {{ task.employee.firstName|first|upper }} {{ task.employee.lastName|first|upper }}
                            </div>
                        </div>
                    </a>
                {% endif %}
            {% endfor %}
            <a href="task/add" class="task-add">
                + Ajouter une tâche
            </a>
        </div>
    </div>

    <div class="task-column">
        <h2>Done</h2>
        <div class="tasks-list">
            {% for task in tasks %}
                {% if task.status.value == 'done' %}
                    <a class="task" href="../task/{{task.id}}">
                        <h3>{{task.title}}</h3>
                        <p>{{task.description}}</p>
                        <div class="task-infos">
                            <div class="task-deadline">
                                {% if not task.deadline is null %}
                                    <i class="fa-regular fa-calendar"></i> {{task.deadline|date('d-m-Y')}}
                                {% endif %}
                            </div>
                            <div class="mini-user">
                                {{ task.employee.firstName|first|upper }} {{ task.employee.lastName|first|upper }}
                            </div>
                        </div>
                    </a>
                {% endif %}
            {% endfor %}
            <a href="task/add" class="task-add">
                + Ajouter une tâche
            </a>
        </div>
    </div>

</div>

{% endblock %}
